# 会议录音转写工具 · 使用说明（Mac）

---

## 第一步：安装工具

**双击打开 `安装.command`**，等待安装完成。

> 💡 **如果双击后提示"无法打开"**：右键点击 `安装.command` → 选「打开」→ 弹窗里再点「打开」。这是 Mac 的安全机制，只需第一次这样操作，之后正常双击即可。

脚本会自动完成所有安装步骤，全程约 5–15 分钟（取决于网速）。安装期间终端窗口保持打开即可，不需要任何操作。

安装完成后会看到：
```
✅ 安装完成！以后直接双击「启动.command」使用。
```

> 如果安装中途报错，把终端窗口的内容截图发给我。

---

## 第二步：配置 API Key（用于 AI 总结）

纯转写功能**不需要** API Key，跳过此步也可以使用。

如需 AI 自动生成会议纪要：

1. 打开 `启动.command` 启动工具
2. 在浏览器界面中点击「⚙️ 设置」标签页
3. 在「DASHSCOPE_API_KEY」一栏填入你的 Key，点「保存」

> ⚠️ 这种方式每次启动工具后需要重新填写。如需永久保存，参见文末「进阶：永久配置 API Key」。

---

## 第三步：日常使用

每次使用时，**双击 `启动.command`**，浏览器会自动打开工具界面。

> 💡 **如果双击后提示"无法打开"**：右键点击 `启动.command` → 选「打开」→ 弹窗里再点「打开」。只需第一次这样操作。

### 转写录音

1. 点击「📝 转写与总结」标签页
2. 点击上传区域，选择录音文件（支持 mp3、m4a、wav、flac 等格式，可多选）
3. 按需勾选：
   - **启用 AI 总结**：自动生成会议纪要（需要 API Key）
   - **启用说话人区分**：识别不同发言人（转写速度会变慢）
4. 点「🚀 开始处理」
5. 等待完成，状态框会显示输出文件位置

**首次运行**会自动下载转写模型（约 500MB），请保持网络畅通，耐心等待。

### 查看和管理结果

- **「📋 任务管理」**：查看所有历史任务，可查看转写文本和总结，也可用编辑后的文本重新生成总结
- **「🔗 合并总结」**：将同一会议的多段录音合并生成一份总结
- **「📖 Markdown 查看器」**：渲染查看 `.md` 格式的会议总结

### 输出文件在哪里

所有文件保存在工具文件夹的 `data/output/` 目录下，每个录音对应一个子文件夹：

```
data/output/
└── 录音文件名_日期时间/
    ├── 转写全文.txt          ← 转写文本
    ├── 转写全文_说话人标注.txt ← 开启说话人区分时生成
    └── 会议总结.md           ← 开启 AI 总结时生成
```

在任务管理页面选中任务后，点「📂 打开输出目录」可以直接打开对应文件夹。

---

## 常见问题

**界面没有自动打开？**
手动打开浏览器，访问 `http://127.0.0.1:7860`

**处理速度很慢？**
Mac 上转写使用 CPU 计算，速度约为录音时长的 1–2 倍（30 分钟录音约需 30–60 分钟）。开启说话人区分会更慢。

**中途断网或关闭了窗口怎么办？**
重新双击 `启动.command`，再次上传同一文件，工具会自动从断点继续，不会重复已完成的部分。

**转写文字有错误？**
在「📋 任务管理」页面选中任务，直接在转写文本框里修改，然后点「🔄 用上方文本重新总结」。

**终端窗口可以关吗？**
不能。终端是工具的运行环境，关掉终端工具就停了。浏览器标签页可以关，但终端要留着。

---

## 进阶：永久配置 API Key

在终端中运行（把 `sk-你的key` 替换为实际的 Key）：

```bash
echo 'export DASHSCOPE_API_KEY="sk-你的key"' >> ~/.zshrc
source ~/.zshrc
```

配置后重启工具即自动生效，不需要每次在界面里填写。
